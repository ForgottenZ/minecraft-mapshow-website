{% extends "base.html" %}
{% block content %}
<section class="card">
  <h2>标签管理</h2>
  <form method="post" class="form-inline">
    <input type="text" name="name" placeholder="标签名称" required />
    <input type="color" name="color" value="#3a4ddb" />
    <label class="checkbox">
      <input type="checkbox" name="is_global" checked /> 通用标签
    </label>
    <button type="submit" class="button primary">新增标签</button>
  </form>
  <table class="data-table">
    <thead>
      <tr>
        <th>名称</th>
        <th>通用</th>
        <th>创建时间</th>
        <th>操作</th>
      </tr>
    </thead>
    <tbody>
      {% for tag in tags %}
        <tr>
          <td>
            <span class="tag" {% if tag.color %}style="background: {{ tag.color }}; color: #fff;"{% endif %}>{{ tag.name }}</span>
          </td>
          <td>{{ '是' if tag.is_global else '否' }}</td>
          <td>{{ tag.created_at }}</td>
          <td class="actions">
            <form method="post" action="{{ url_for('admin_toggle_tag', tag_id=tag.id) }}">
              <button type="submit" class="button">{{ '取消通用' if tag.is_global else '设为通用' }}</button>
            </form>
            <form method="post" action="{{ url_for('admin_delete_tag', tag_id=tag.id) }}" onsubmit="return confirm('确认删除标签吗？');">
              <button type="submit" class="button danger">删除</button>
            </form>
          </td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
</section>
{% endblock %}
